# MemoryAddressHelpers

This library provides a method which reveals the actual address of an instance
of a class or value object.


## Why Do I Need This Library?

Since this library has only two main methods, its a valid question why exactly
its not easier to directly drop those methods into that project where they are
needed.

There are two reasons for this. First of all, we should not use a direct memory
location and perform any kind of magic trick on that. This methods should only
be used to make debugging easier for really low level code and code-generation,
like IL code that has been generated by your program.

Second, for this methods to work, we need unsafe code, which you normally do not
want to activate in your own project. By placing this methods into a Nuget of
their own, we can leave our own project untouched (except another package reference
to this Nuget package).


## Examples Using Extension Methods

To get the address of a class, we can use the GetMemoryAddress() extension methods.
For all examples, you will need the using statement

```
using MemoryAddressHelpers;
```

The current address of a reference type (e.g. a class), use:

```
var someClass = new SomeClass();
var address = someClass.GetMemoryAddress();
```

Value types are a bit trickier, though, because we must take care to pass a reference
instead of a copy of that object. The following example shows how to get the stack
address of a value type:

```
var someValue = 42;
var address = someValue.GetMemoryAddress();
```

or for that matter, even complex value types, i.e. structs:

```
var someStruct = new SomeStruct();
var address = someStruct.GetMemoryAddress();
```


## Examples Using Static Methods

All of the examples shown above can be rewritten by using direct method calls, instead
of using extension methods.

The current address of a reference type (e.g. a class), use:

```
var someClass = new SomeClass();
var longAddress1 = MemoryAddress.Get(someClass);
```

For a reference type you need to use the ref-keyword

```
var someStruct = new SomeStruct();
var address = MemoryAddress.Get(ref someStruct);
```
